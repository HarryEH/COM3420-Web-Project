- content_for :title, 'Map'

- content_for :scripts do
  = javascript_include_tag 'map'
  %script{:src => "//maps.google.com/maps/api/js", :type => "text/javascript"}
  = yield :scripts
%div.panel.panel-default
  %div.panel-body

    #map{:style => 'width: 70%; height: 510px;'}

    #info
    -@gMarkers = Gmaps4rails.build_markers(Record.all) do |item, marker|
      - marker.lat item.latitude
      - marker.lng item.longitude
      - marker.title item.title

:javascript
    $(document).ready( function() {
      map = new GMaps({
          el: '#map',
          lat: 53.452,
          lng: -1.212,
          zoom: 13,
      });

      //This adds listeners to each marker
      markers = map.addMarkers(#{raw @gMarkers.to_json});
      for (i = 0; i < markers.length; i++) {
        //This adds listeners to each marker so that they perform
        //an action on clicking them.
        markers[i].addListener('click', function() {
          //TODO ADD ON CLICK HERE!!!
          $('#info').empty();
          var z = document.createElement('div');
          z.innerHTML = "harry smells";
          document.getElementById('info').appendChild(z);
          console.log("string");
        });
      }
    });


